constants: # defines the "anchors" that are used later on in this yaml file
    - &BUTTON_A 0
    - &BUTTON_B 1
    - &BUTTON_X 2
    - &BUTTON_Y 3
    - &BUTTON_LB 4
    - &BUTTON_RB 5
    - &BUTTON_BACK 6
    - &BUTTON_START 7
    - &BUTTON_XBOX 8
    - &BUTTON_LTHUMB 9
    - &BUTTON_RTHUMB 10
    - &HAT_DPAD 0
    - &AXIS_LTHUMBX 0
    - &AXIS_LTHUMBY 1
    - &AXIS_RTHUMBX 2
    - &AXIS_RTHUMBY 3
    - &AXIS_RTRIGGER 4
    - &AXIS_LTRIGGER 5

axis_calibration:
    *AXIS_RTRIGGER: &TriggerCalibration
        min: -1.0
        max: 1.0
        uncalibrated_at_start: true
    *AXIS_LTRIGGER: *TriggerCalibration
    *AXIS_LTHUMBX: &ThumbCalibration
        <<: *TriggerCalibration
        uncalibrated_at_start: false
    *AXIS_LTHUMBY: *ThumbCalibration
    *AXIS_RTHUMBX: *ThumbCalibration
    *AXIS_RTHUMBY: *ThumbCalibration

mappings:
    is_mode_play:
        do_play_scale_position_0:
            hat: *HAT_DPAD
            action: momentary #default
            direction: [up, down]
        do_play_scale_position_1:
            hat: *HAT_DPAD
            direction: downright
        do_play_scale_position_2:
            hat: *HAT_DPAD
            direction: upright
        do_play_scale_position_3:
            hat: *HAT_DPAD
            direction: right
        do_play_scale_position_4:
            hat: *HAT_DPAD
            direction: left
        do_play_scale_position_5:
            hat: *HAT_DPAD
            direction: downleft
        do_play_scale_position_6:
            hat: *HAT_DPAD
            direction: upleft
        do_flatten:
            button: *BUTTON_RB
            action: momentary #default
        do_sustain:
            button: *BUTTON_LB
        do_inc_extension_1:
            button: [*BUTTON_X, *BUTTON_Y]
        do_set_quality_1:
            button: *BUTTON_A
        do_set_quality_2:
            button: *BUTTON_B
        do_set_velocity:
            axis: *AXIS_RTRIGGER
            value_at_min: 127
            value_at_max: 0
        do_set_voicing:
            axis: *AXIS_LTRIGGER
            value_at_min: 0
            value_at_max: 3
            steps:
                - le .05
                - le .4
                - le .9
                - le 1
    is_mode_change_octave:
        master_button: *BUTTON_START
        master_action: momentary
        do_inc_octave_1: &DpadLatch
            hat: *HAT_DPAD
            direction: right
            action: latch
        do_dec_octave_1: 
            <<: *DpadLatch
            direction: left
    is_mode_change_harmony:
        master_button: *BUTTON_BACK
        master_action: momentary
        do_set_harmony_0: # single voice
            button: *BUTTON_A
            action: latch
        do_set_harmony_1: # harmony a third above root
            button: *BUTTON_X
            action: latch
        do_set_harmony_2: # triad
            button: *BUTTON_Y
            action: latch
    is_mode_change_bass:
        master_button: *BUTTON_LTHUMB
        master_action: momentary
    is_mode_change_tonic:
        master_button: *BUTTON_RTHUMB
        master_action: momentary
